@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core.Models

    <!-- Article and news section start-->
    <section class="article-and-news background-@Model.Value("articlesAndNewsBackgroundColo")">
        <div class="container">
            <div class="article-and-news-title">
                <h3>Article & News</h3>
                <div>
                    <h2>Get Every Single Articles & News</h2>
                    <button class="button-transparent"><span>Browse Articles</span><i class="fa-solid fa-arrow-trend-up"></i></button>
                </div>
            </div>
            <div class="article-and-news-grid">

                @{

                var itemsPerPage = 9;
                var pageNumber = 1;

                if(!int.TryParse(Context.Request.Query["page"], out pageNumber))
                {
                    pageNumber = 1;
                }


                var selection = Umbraco?.Content(Guid.Parse("ef6a4241-281c-4017-b654-f0194bac4f3f"))?
                .Children()
                .Where(x => x.IsVisible());

                var totalItems = selection?.Count() ?? 0;
                var pagedItems = selection?.Skip((pageNumber - 1) * itemsPerPage).Take(itemsPerPage);
            }
                @if(pagedItems != null) 
                {
                    @foreach (var item in pagedItems)
                    {
                        <a href="@item.Url()" class="article-and-news-card">
                            <div>
                                <h6>@item.CreateDate.ToString("dd")</h6>
                                <p>@item.CreateDate.ToString("MMM")</p>
                            </div>
                            @{
                                var thumbnail = item.Value<IPublishedContent>("articleImage");
                            }
                            <img src="@thumbnail.Url()" />
                            <h3>@item.Value("articleCategory")</h3>
                            <h2>@item.Value("articleTitle")</h2>
                            <p>@item.Value("articleDescription")</p>
                        </a>
                    }
                }
                
            </div>
            <div class="carousel-dots">
                <a class="carousel-dot"></a>
                <a class="carousel-dot active"></a>
                <a class="carousel-dot"></a>
                <a class="carousel-dot"></a>
                <a class="carousel-dot"></a>
            </div>
        </div>
    </section>
    <!-- Article and news section end-->



